<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Churn Prediction</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1000px;
            /* Wider container for larger screen sizes */
            margin-top: 20px;
            /* Reduced top margin */
        }

        .img-fluid {
            max-width: 300px;
            /* Increased image width */
            height: auto;
            /* Maintain aspect ratio */
            margin-bottom: 20px;
            /* Space below the image */
        }

        .form-group {
            margin-bottom: 1rem;
            /* Reduced bottom margin */
        }

        .btn-center {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .row {
            margin: 0;
            /* Remove row margin */
        }

        .form-container {
            margin-left: 20px;
            /* Added space between image and form */
        }
    </style>
</head>

<body>
    <div class="container">
        <h2 class="mt-4 text-center">Customer Churn Prediction</h2>

        <!-- Image right below the heading -->
        <div class="text-center">
            <img src="static/images/churn.png" alt="Churn Prediction" class="img-fluid">
        </div>

        <div class="d-flex flex-row align-items-start">
            <!-- Form to collect feature inputs -->
            <form id="churnForm" class="flex-grow-1 form-container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="gender">Gender:</label>
                            <select class="form-control" id="gender" name="gender">
                                <option value="" disabled selected>Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="senior_citizen">Senior Citizen:</label>
                            <select class="form-control" id="senior_citizen" name="senior_citizen">
                                <option value="" disabled selected>Select Option</option>
                                <option value="0">No</option>
                                <option value="1">Yes</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="partner">Partner:</label>
                            <select class="form-control" id="partner" name="partner">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dependents">Dependents:</label>
                            <select class="form-control" id="dependents" name="dependents">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tenure">Tenure (months):</label>
                            <input type="number" class="form-control" id="tenure" name="tenure" required>
                        </div>
                        <div class="form-group">
                            <label for="phone_service">Phone Service:</label>
                            <select class="form-control" id="phone_service" name="phone_service">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="multiple_lines">Multiple Lines:</label>
                            <select class="form-control" id="multiple_lines" name="multiple_lines">
                                <option value="" disabled selected>Select Option</option>
                                <option value="No phone service">No phone service</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="internet_service">Internet Service:</label>
                            <select class="form-control" id="internet_service" name="internet_service">
                                <option value="" disabled selected>Select Option</option>
                                <option value="DSL">DSL</option>
                                <option value="Fiber optic">Fiber optic</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="online_security">Online Security:</label>
                            <select class="form-control" id="online_security" name="online_security">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                                <option value="No internet service">No internet service</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="online_backup">Online Backup:</label>
                            <select class="form-control" id="online_backup" name="online_backup">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                                <option value="No internet service">No internet service</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="device_protection">Device Protection:</label>
                            <select class="form-control" id="device_protection" name="device_protection">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                                <option value="No internet service">No internet service</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tech_support">Tech Support:</label>
                            <select class="form-control" id="tech_support" name="tech_support">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                                <option value="No internet service">No internet service</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contract">Contract:</label>
                            <select class="form-control" id="contract" name="contract">
                                <option value="" disabled selected>Select Option</option>
                                <option value="Month-to-month">Month-to-month</option>
                                <option value="One year">One year</option>
                                <option value="Two year">Two year</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="monthly_charges">Monthly Charges:</label>
                            <input type="number" class="form-control" id="monthly_charges" name="monthly_charges"
                                step="0.01" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="total_charges">Total Charges:</label>
                            <input type="number" class="form-control" id="total_charges" name="total_charges"
                                step="0.01" required>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="streaming_tv">Streaming TV:</label>
                    <select class="form-control" id="streaming_tv" name="streaming_tv">
                        <option value="" disabled selected>Select Option</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="streaming_movies">Streaming Movies:</label>
                    <select class="form-control" id="streaming_movies" name="streaming_movies">
                        <option value="" disabled selected>Select Option</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="paperless_billing">Paperless Billing:</label>
                    <select class="form-control" id="paperless_billing" name="paperless_billing">
                        <option value="" disabled selected>Select Option</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="payment_method">Payment Method:</label>
                    <select class="form-control" id="payment_method" name="payment_method">
                        <option value="" disabled selected>Select Method</option>
                        <option value="Electronic check">Electronic check</option>
                        <option value="Mailed check">Mailed check</option>
                        <option value="Bank transfer (automatic)">Bank transfer (automatic)</option>
                        <option value="Credit card (automatic)">Credit card (automatic)</option>
                    </select>
                </div>

                <div class="btn-center">
                    <button type="submit" class="btn btn-primary">Predict Churn</button>
                </div>
            </form>
        </div>

        <div id="predictionResult" class="alert alert-success mt-4" style="display:none;">
            <strong>Prediction Result:</strong> <span id="resultText"></span>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $('#churnForm').on('submit', function (event) {
                event.preventDefault();

                const formData = $(this).serialize();
                $.ajax({
                    type: 'POST',
                    url: '/predict',
                    data: formData,
                    success: function (response) {
                        $('#resultText').text(response.result);
                        $('#predictionResult').show();
                    },
                    error: function (error) {
                        console.error('Error:', error);
                    }
                });
            });
        });
    </script>
</body>

</html>